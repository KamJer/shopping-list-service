2024-10-09 10:35:53 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-09 10:35:53 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 18196 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-09 10:35:53 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-09 10:35:54 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-09 10:35:54 [main] INFO  : Finished Spring Data repository scanning in 144 ms. Found 4 JPA repository interfaces.
2024-10-09 10:35:55 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-09 10:35:55 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 10:35:55 [main] INFO  : Starting service [Tomcat]
2024-10-09 10:35:55 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-09 10:35:55 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-09 10:35:55 [main] INFO  : Root WebApplicationContext: initialization completed in 1788 ms
2024-10-09 10:35:55 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-09 10:35:55 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-09 10:35:55 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-09 10:35:55 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-09 10:35:55 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-09 10:35:55 [main] INFO  : HikariPool-1 - Starting...
2024-10-09 10:35:55 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@736f2fb8
2024-10-09 10:35:55 [main] INFO  : HikariPool-1 - Start completed.
2024-10-09 10:35:56 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-09 10:35:56 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-09 10:35:56 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 10:35:57 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-09 10:35:57 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-09 10:35:57 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-09 10:35:57 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 10:35:58 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-09 10:35:58 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-09 10:35:58 [main] INFO  : Started ShoppingListServiceApplication in 5.256 seconds (process running for 7.135)
2024-10-09 10:35:58 [RMI TCP Connection(3)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-09 10:35:58 [RMI TCP Connection(3)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-09 10:35:58 [RMI TCP Connection(3)-192.168.0.13] INFO  : Completed initialization in 1 ms
2024-10-09 10:36:20 [tomcat-handler-4] INFO  : New session connected: 92c28062-2c46-ac48-7c47-9fb2c11ae46f, user: Jerzynki
2024-10-09 10:36:51 [tomcat-handler-9] INFO  : New session connected: 49343a68-cc0a-ae33-5630-a9cb322295fc, user: Jerzynki
2024-10-09 13:05:08 [tomcat-handler-17] INFO  : New session connected: 5fc405dd-079b-b84a-2e07-10bfbb075a19, user: Jerzynki
2024-10-09 13:05:08 [tomcat-handler-18] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 13:05:35 [tomcat-handler-19] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/topic/messages"}}
2024-10-09 13:05:50 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 13:05:50 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-09 13:05:50 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-09 13:05:50 [SpringApplicationShutdownHook] ERROR : Closing session due to exception for StandardWebSocketSession[id=5fc405dd-079b-b84a-2e07-10bfbb075a19, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:455)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:556)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:544)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1024)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:46)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4041)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:4650)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:471)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:919)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:447)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:301)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.destroy(TomcatWebServer.java:374)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:177)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1093)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-10-09 13:06:25 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-09 13:06:25 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 16880 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-09 13:06:25 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-09 13:06:26 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-09 13:06:26 [main] INFO  : Finished Spring Data repository scanning in 86 ms. Found 4 JPA repository interfaces.
2024-10-09 13:06:27 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-09 13:06:27 [main] INFO  : Root WebApplicationContext: initialization completed in 1300 ms
2024-10-09 13:07:03 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-09 13:07:03 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 9224 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-09 13:07:03 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-09 13:07:03 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-09 13:07:04 [main] INFO  : Finished Spring Data repository scanning in 84 ms. Found 4 JPA repository interfaces.
2024-10-09 13:07:04 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-09 13:07:04 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 13:07:04 [main] INFO  : Starting service [Tomcat]
2024-10-09 13:07:04 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-09 13:07:04 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-09 13:07:04 [main] INFO  : Root WebApplicationContext: initialization completed in 1234 ms
2024-10-09 13:07:04 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-09 13:07:04 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-09 13:07:04 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-09 13:07:05 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-09 13:07:05 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-09 13:07:05 [main] INFO  : HikariPool-1 - Starting...
2024-10-09 13:07:05 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@11896124
2024-10-09 13:07:05 [main] INFO  : HikariPool-1 - Start completed.
2024-10-09 13:07:05 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-09 13:07:06 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-09 13:07:06 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 13:07:06 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-09 13:07:06 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-09 13:07:06 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-09 13:07:07 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 13:07:07 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-09 13:07:07 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-09 13:07:07 [main] INFO  : Started ShoppingListServiceApplication in 4.1 seconds (process running for 4.513)
2024-10-09 13:07:07 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-09 13:07:07 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-09 13:07:07 [RMI TCP Connection(1)-192.168.0.13] INFO  : Completed initialization in 1 ms
2024-10-09 13:07:13 [tomcat-handler-4] INFO  : New session connected: 07ab501b-5078-a664-64e1-b5f20b8f8bf5, user: Jerzynki
2024-10-09 13:07:13 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 13:07:23 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/topic/messages"}}
2024-10-09 13:15:07 [tomcat-handler-13] INFO  : New session connected: 91a94c24-946e-db24-c14e-7c75ec69f97f, user: Jerzynki
2024-10-09 13:15:07 [tomcat-handler-14] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 13:15:16 [tomcat-handler-15] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 14:53:17 [tomcat-handler-22] INFO  : New session connected: dfa87afd-26d5-4148-a0d5-4dd0318e980d, user: Jerzynki
2024-10-09 14:53:17 [tomcat-handler-23] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 14:53:17 [tomcat-handler-24] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 19:25:21 [tomcat-handler-31] INFO  : New session connected: 780f1839-1131-6394-873c-54647c8a3e29, user: Jerzynki
2024-10-09 19:25:21 [tomcat-handler-32] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 19:25:21 [tomcat-handler-33] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 19:26:34 [tomcat-handler-34] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{}","DEST":"/synchronizeData","ID":"780f1839-1131-6394-873c-54647c8a3e29"}}
2024-10-09 19:27:59 [tomcat-handler-35] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{}","DEST":"/synchronizeData","ID":"780f1839-1131-6394-873c-54647c8a3e29"}}
2024-10-09 19:31:08 [tomcat-handler-42] INFO  : New session connected: f9ff5d0f-35e7-d053-6e62-6a1298fbf1b4, user: Jerzynki
2024-10-09 19:31:08 [tomcat-handler-43] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 19:31:09 [tomcat-handler-44] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 19:31:16 [tomcat-handler-45] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"DEST":"/synchronizeData","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"f9ff5d0f-35e7-d053-6e62-6a1298fbf1b4"}}
2024-10-09 19:31:58 [tomcat-handler-52] INFO  : New session connected: 5e1af582-399e-c0fd-a22b-a3fd85416210, user: Jerzynki
2024-10-09 19:31:58 [tomcat-handler-53] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 19:31:58 [tomcat-handler-54] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 19:32:00 [tomcat-handler-55] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"5e1af582-399e-c0fd-a22b-a3fd85416210","DEST":"/synchronizeData"}}
2024-10-09 19:48:09 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 19:48:09 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-09 19:48:09 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-09 19:48:15 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-09 19:48:15 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 13832 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-09 19:48:15 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-09 19:48:16 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-09 19:48:16 [main] INFO  : Finished Spring Data repository scanning in 94 ms. Found 4 JPA repository interfaces.
2024-10-09 19:48:16 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-09 19:48:16 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 19:48:16 [main] INFO  : Starting service [Tomcat]
2024-10-09 19:48:16 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-09 19:48:16 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-09 19:48:16 [main] INFO  : Root WebApplicationContext: initialization completed in 1251 ms
2024-10-09 19:48:17 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-09 19:48:17 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-09 19:48:17 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-09 19:48:17 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-09 19:48:17 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-09 19:48:17 [main] INFO  : HikariPool-1 - Starting...
2024-10-09 19:48:17 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5d449307
2024-10-09 19:48:17 [main] INFO  : HikariPool-1 - Start completed.
2024-10-09 19:48:17 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-09 19:48:18 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-09 19:48:18 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 19:48:18 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-09 19:48:18 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-09 19:48:18 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-09 19:48:19 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 19:48:19 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-09 19:48:19 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-09 19:48:19 [main] INFO  : Started ShoppingListServiceApplication in 4.128 seconds (process running for 5.094)
2024-10-09 19:48:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-09 19:48:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-09 19:48:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Completed initialization in 1 ms
2024-10-09 20:00:56 [tomcat-handler-4] INFO  : New session connected: 28ec8caa-9f95-735f-c2e3-8322bf8d5a4d, user: Jerzynki
2024-10-09 20:00:56 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:00:56 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:01:02 [tomcat-handler-7] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"28ec8caa-9f95-735f-c2e3-8322bf8d5a4d","DEST":"/synchronizeData","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}"}}
2024-10-09 20:26:26 [tomcat-handler-13] INFO  : New session connected: f6217152-6d33-b00d-8597-a6812269fb9c, user: Jerzynki
2024-10-09 20:26:26 [tomcat-handler-14] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:26:26 [tomcat-handler-15] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:34:13 [tomcat-handler-22] INFO  : New session connected: c70e389a-f870-071d-73de-4875af9826ca, user: Jerzynki
2024-10-09 20:34:13 [tomcat-handler-23] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:34:13 [tomcat-handler-24] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:34:17 [tomcat-handler-25] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"c70e389a-f870-071d-73de-4875af9826ca","DEST":"/synchronizeData"}}
2024-10-09 20:38:53 [tomcat-handler-31] INFO  : New session connected: fb2862b4-7505-0fff-5e6d-28732ae60b06, user: Jerzynki
2024-10-09 20:38:54 [tomcat-handler-32] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:38:54 [tomcat-handler-33] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:39:05 [tomcat-handler-34] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"fb2862b4-7505-0fff-5e6d-28732ae60b06","DEST":"/synchronizeData","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}"}}
2024-10-09 20:40:06 [tomcat-handler-41] INFO  : New session connected: a43cb812-36e4-ad63-563f-5f0233befd87, user: Jerzynki
2024-10-09 20:40:06 [tomcat-handler-42] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:40:06 [tomcat-handler-43] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:40:14 [tomcat-handler-44] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"a43cb812-36e4-ad63-563f-5f0233befd87","DEST":"/synchronizeData"}}
2024-10-09 20:41:02 [tomcat-handler-51] INFO  : New session connected: b168b265-f65c-9414-6fd1-04c0baba7972, user: Jerzynki
2024-10-09 20:41:02 [tomcat-handler-52] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:41:02 [tomcat-handler-53] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:41:06 [tomcat-handler-54] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"b168b265-f65c-9414-6fd1-04c0baba7972","DEST":"/synchronizeData"}}
2024-10-09 20:41:46 [HikariPool-1 housekeeper] WARN  : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56s79ms581Âµs100ns).
2024-10-09 20:41:46 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 20:41:46 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-09 20:41:46 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-09 20:41:46 [SpringApplicationShutdownHook] ERROR : Closing session due to exception for StandardWebSocketSession[id=b168b265-f65c-9414-6fd1-04c0baba7972, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:455)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:556)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:544)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1024)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:46)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4041)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:4650)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:471)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:919)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:447)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:301)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.destroy(TomcatWebServer.java:374)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:177)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1093)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-10-09 20:43:34 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-09 20:43:34 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 19120 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-09 20:43:34 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-09 20:43:34 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-09 20:43:34 [main] INFO  : Finished Spring Data repository scanning in 85 ms. Found 4 JPA repository interfaces.
2024-10-09 20:43:35 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-09 20:43:35 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 20:43:35 [main] INFO  : Starting service [Tomcat]
2024-10-09 20:43:35 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-09 20:43:35 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-09 20:43:35 [main] INFO  : Root WebApplicationContext: initialization completed in 1211 ms
2024-10-09 20:43:35 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-09 20:43:35 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-09 20:43:35 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-09 20:43:35 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-09 20:43:35 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-09 20:43:35 [main] INFO  : HikariPool-1 - Starting...
2024-10-09 20:43:36 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4056cdb2
2024-10-09 20:43:36 [main] INFO  : HikariPool-1 - Start completed.
2024-10-09 20:43:36 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-09 20:43:36 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-09 20:43:36 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 20:43:37 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-09 20:43:37 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-09 20:43:37 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-09 20:43:37 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-09 20:43:38 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-09 20:43:38 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-09 20:43:38 [main] INFO  : Started ShoppingListServiceApplication in 4.133 seconds (process running for 4.573)
2024-10-09 20:43:38 [RMI TCP Connection(3)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-09 20:43:38 [RMI TCP Connection(3)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-09 20:43:38 [RMI TCP Connection(3)-192.168.0.13] INFO  : Completed initialization in 1 ms
2024-10-09 20:43:49 [tomcat-handler-4] INFO  : New session connected: 4e1e2065-061d-5999-6e4c-9636a726de67, user: Jerzynki
2024-10-09 20:43:49 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-09 20:43:49 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-09 20:43:55 [tomcat-handler-7] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"4e1e2065-061d-5999-6e4c-9636a726de67"}}
2024-10-09 23:51:14 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-09 23:51:14 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-09 23:51:14 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-09 23:51:14 [SpringApplicationShutdownHook] ERROR : Closing session due to exception for StandardWebSocketSession[id=4e1e2065-061d-5999-6e4c-9636a726de67, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:455)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:556)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:544)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1024)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:46)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4041)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:4650)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:471)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:919)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:447)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:301)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.destroy(TomcatWebServer.java:374)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:177)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1093)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
