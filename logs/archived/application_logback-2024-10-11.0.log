2024-10-11 16:54:59 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-11 16:54:59 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 16068 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-11 16:54:59 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-11 16:55:00 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-11 16:55:00 [main] INFO  : Finished Spring Data repository scanning in 167 ms. Found 4 JPA repository interfaces.
2024-10-11 16:55:01 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-11 16:55:01 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-11 16:55:01 [main] INFO  : Starting service [Tomcat]
2024-10-11 16:55:01 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-11 16:55:01 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-11 16:55:01 [main] INFO  : Root WebApplicationContext: initialization completed in 1985 ms
2024-10-11 16:55:01 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-11 16:55:01 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-11 16:55:01 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-11 16:55:01 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-11 16:55:01 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-11 16:55:01 [main] INFO  : HikariPool-1 - Starting...
2024-10-11 16:55:03 [main] WARN  : HHH000342: Could not obtain connection to query metadata
java.lang.NullPointerException: Cannot invoke "org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(java.sql.SQLException, String)" because the return value of "org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.sqlExceptionHelper()" is null
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:116)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:290)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:123)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:77)
	at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:130)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:238)
	at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:215)
	at org.hibernate.boot.model.relational.Database.<init>(Database.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:221)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.<init>(InFlightMetadataCollectorImpl.java:189)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:171)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at pl.kamjer.shoppinglistservice.ShoppingListServiceApplication.main(ShoppingListServiceApplication.java:10)
2024-10-11 16:55:03 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-11 16:55:03 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-11 16:55:04 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-11 16:55:04 [main] INFO  : HikariPool-1 - Starting...
2024-10-11 16:55:05 [main] WARN  : SQL Error: 0, SQLState: 08S01
2024-10-11 16:55:05 [main] ERROR : Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
2024-10-11 16:55:05 [main] ERROR : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
2024-10-11 16:55:05 [main] WARN  : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
2024-10-11 16:55:05 [main] INFO  : Stopping service [Tomcat]
2024-10-11 16:55:05 [main] INFO  : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-11 16:55:05 [main] ERROR : Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at pl.kamjer.shoppinglistservice.ShoppingListServiceApplication.main(ShoppingListServiceApplication.java:10)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 15 common frames omitted
Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:100)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:39)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63)
	at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:70)
	at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:65)
	at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:570)
	at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:72)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:232)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:117)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:322)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:457)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 19 common frames omitted
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:438)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:189)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)
	at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:437)
	at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46)
	... 40 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:104)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:149)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:165)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:88)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:120)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:935)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:805)
	... 53 common frames omitted
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)
	at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:62)
	... 56 common frames omitted
2024-10-11 16:55:46 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-11 16:55:46 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 13548 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-11 16:55:46 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-11 16:55:46 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-11 16:55:47 [main] INFO  : Finished Spring Data repository scanning in 141 ms. Found 4 JPA repository interfaces.
2024-10-11 16:55:47 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-11 16:55:47 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-11 16:55:47 [main] INFO  : Starting service [Tomcat]
2024-10-11 16:55:47 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-11 16:55:47 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-11 16:55:47 [main] INFO  : Root WebApplicationContext: initialization completed in 1657 ms
2024-10-11 16:55:48 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-11 16:55:48 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-11 16:55:48 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-11 16:55:48 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-11 16:55:48 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-11 16:55:48 [main] INFO  : HikariPool-1 - Starting...
2024-10-11 16:55:48 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5b5a89d1
2024-10-11 16:55:48 [main] INFO  : HikariPool-1 - Start completed.
2024-10-11 16:55:48 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-11 16:55:49 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-11 16:55:49 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-11 16:55:50 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-11 16:55:50 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-11 16:55:50 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-11 16:55:51 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-11 16:55:51 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-11 16:55:51 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-11 16:55:51 [main] INFO  : Started ShoppingListServiceApplication in 5.479 seconds (process running for 6.043)
2024-10-11 16:55:51 [RMI TCP Connection(2)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-11 16:55:51 [RMI TCP Connection(2)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-11 16:55:51 [RMI TCP Connection(2)-192.168.0.13] INFO  : Completed initialization in 1 ms
2024-10-11 16:55:59 [tomcat-handler-4] INFO  : New session connected: d3a8f069-6711-d5b1-fd84-8e36c4317aca, user: Jerzynki
2024-10-11 16:55:59 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 16:55:59 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 16:55:59 [tomcat-handler-7] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 16:55:59 [tomcat-handler-8] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"d3a8f069-6711-d5b1-fd84-8e36c4317aca","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 16:56:39 [tomcat-handler-18] INFO  : New session connected: febe1f83-4842-65d8-6096-0b664e748537, user: Jerzynki
2024-10-11 16:56:39 [tomcat-handler-26] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 16:56:39 [tomcat-handler-21] INFO  : New session connected: 1f19698d-0381-680c-0616-73faa98551b5, user: Jerzynki
2024-10-11 16:56:39 [tomcat-handler-29] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 16:56:39 [tomcat-handler-28] ERROR : Jerzynki: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:100)
	at .reInitializeWithUser(ShoppingServiceRepository.java:108)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:121)
	at .lambda$synchronizeData$3(CustomViewModel.java:92)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1167)
	at .run(ThreadPoolExecutor.java:641)
	at .run(Thread.java:919)
2024-10-11 16:56:39 [tomcat-handler-30] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 16:56:39 [tomcat-handler-31] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 16:56:39 [tomcat-handler-32] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"febe1f83-4842-65d8-6096-0b664e748537","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 16:56:44 [tomcat-handler-33] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 16:56:44 [tomcat-handler-33] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 16:56:44 [tomcat-handler-33] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"1f19698d-0381-680c-0616-73faa98551b5","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 16:57:45 [tomcat-handler-42] INFO  : New session connected: 10f41943-6b14-d09f-27fe-aa09552b5a60, user: Jerzynki
2024-10-11 16:57:45 [tomcat-handler-43] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 16:57:45 [tomcat-handler-44] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 16:57:45 [tomcat-handler-45] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 16:57:45 [tomcat-handler-46] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"10f41943-6b14-d09f-27fe-aa09552b5a60","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 17:14:20 [tomcat-handler-53] INFO  : New session connected: b7b7afdd-767f-74c0-ed75-012c3140e499, user: Jerzynki
2024-10-11 17:14:21 [tomcat-handler-54] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 17:14:21 [tomcat-handler-55] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 17:14:21 [tomcat-handler-56] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 17:14:21 [tomcat-handler-57] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"b7b7afdd-767f-74c0-ed75-012c3140e499","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 17:33:52 [tomcat-handler-64] INFO  : New session connected: 9e92db37-44b7-d5f5-2569-3bfb1d04702f, user: Jerzynki
2024-10-11 17:33:52 [tomcat-handler-65] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 17:33:52 [tomcat-handler-66] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 17:33:52 [tomcat-handler-67] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 17:33:52 [tomcat-handler-68] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","ID":"9e92db37-44b7-d5f5-2569-3bfb1d04702f","DEST":"/synchronizeData"}}
2024-10-11 17:35:07 [tomcat-handler-75] INFO  : New session connected: c2baebef-6135-9af3-3367-c8abdf410e51, user: Jerzynki
2024-10-11 17:35:07 [tomcat-handler-76] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 17:35:07 [tomcat-handler-77] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 17:35:07 [tomcat-handler-78] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 17:35:07 [tomcat-handler-79] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"c2baebef-6135-9af3-3367-c8abdf410e51","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 17:37:41 [tomcat-handler-86] INFO  : New session connected: aa674770-466a-767b-47fd-e0364a6f4705, user: Jerzynki
2024-10-11 17:37:41 [tomcat-handler-87] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 17:37:41 [tomcat-handler-88] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 17:37:41 [tomcat-handler-89] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 17:37:41 [tomcat-handler-90] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"aa674770-466a-767b-47fd-e0364a6f4705","BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 17:41:11 [tomcat-handler-97] INFO  : New session connected: bbd9e7c8-2554-ba4b-cdff-f3169c2b92e2, user: Jerzynki
2024-10-11 17:41:11 [tomcat-handler-98] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 17:41:11 [tomcat-handler-99] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 17:41:11 [tomcat-handler-100] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 17:41:11 [tomcat-handler-101] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":0,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"INSERT\"}],\"savedTime\":\"2024-10-11T17:37:41.783546300\",\"shoppingItemDtoList\":[]}","ID":"bbd9e7c8-2554-ba4b-cdff-f3169c2b92e2","DEST":"/synchronizeData"}}
2024-10-11 18:24:57 [tomcat-handler-108] INFO  : New session connected: ca028a58-e63d-5b87-2977-1ae528c0488e, user: Jerzynki
2024-10-11 18:24:57 [tomcat-handler-109] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:24:57 [tomcat-handler-110] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:24:57 [tomcat-handler-111] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:24:57 [tomcat-handler-112] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T17:41:11.632097200\",\"shoppingItemDtoList\":[]}","ID":"ca028a58-e63d-5b87-2977-1ae528c0488e","DEST":"/synchronizeData"}}
2024-10-11 18:26:51 [tomcat-handler-119] INFO  : New session connected: f3a3f93b-6cea-2bed-a423-912d3487e39d, user: Jerzynki
2024-10-11 18:26:51 [tomcat-handler-120] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:26:51 [tomcat-handler-121] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:26:51 [tomcat-handler-122] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:26:51 [tomcat-handler-123] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:24:57.476877100\",\"shoppingItemDtoList\":[]}","ID":"f3a3f93b-6cea-2bed-a423-912d3487e39d","DEST":"/synchronizeData"}}
2024-10-11 18:27:59 [tomcat-handler-130] INFO  : New session connected: a8f48f3e-1cb0-5566-a1cc-b1bd245d38e3, user: Jerzynki
2024-10-11 18:27:59 [tomcat-handler-131] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:27:59 [tomcat-handler-132] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:27:59 [tomcat-handler-133] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:27:59 [tomcat-handler-134] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:24:57.476877100\",\"shoppingItemDtoList\":[]}","ID":"a8f48f3e-1cb0-5566-a1cc-b1bd245d38e3","DEST":"/synchronizeData"}}
2024-10-11 18:29:20 [tomcat-handler-141] INFO  : New session connected: 0c270dd6-9e48-4984-13cf-d51ed77fdd35, user: Jerzynki
2024-10-11 18:29:20 [tomcat-handler-142] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:29:24 [tomcat-handler-143] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:29:27 [tomcat-handler-144] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:29:27 [tomcat-handler-145] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:24:57.476877100\",\"shoppingItemDtoList\":[]}","ID":"0c270dd6-9e48-4984-13cf-d51ed77fdd35","DEST":"/synchronizeData"}}
2024-10-11 18:33:31 [tomcat-handler-152] INFO  : New session connected: 815d955e-e558-860c-329f-2e3a5080d064, user: Jerzynki
2024-10-11 18:33:31 [tomcat-handler-164] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:31 [tomcat-handler-158] ERROR : Jerzynki: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:102)
	at .reInitializeWithUser(ShoppingServiceRepository.java:107)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:120)
	at .lambda$synchronizeData$3(CustomViewModel.java:106)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1162)
	at .run(ThreadPoolExecutor.java:636)
	at .run(Thread.java:764)
2024-10-11 18:33:31 [tomcat-handler-163] INFO  : New session connected: 7fe50ef7-6df5-0489-6c31-3889992a68fa, user: Jerzynki
2024-10-11 18:33:31 [tomcat-handler-165] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:32 [tomcat-handler-166] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:32 [tomcat-handler-166] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:32 [tomcat-handler-167] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"815d955e-e558-860c-329f-2e3a5080d064"}}
2024-10-11 18:33:32 [tomcat-handler-168] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:32 [tomcat-handler-169] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:32 [tomcat-handler-170] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"7fe50ef7-6df5-0489-6c31-3889992a68fa"}}
2024-10-11 18:33:32 [tomcat-handler-171] ERROR : Closing session due to exception for StandardWebSocketSession[id=815d955e-e558-860c-329f-2e3a5080d064, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:32 [tomcat-handler-171] ERROR : Closing session due to exception for StandardWebSocketSession[id=815d955e-e558-860c-329f-2e3a5080d064, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:32 [tomcat-handler-172] ERROR : Closing session due to exception for StandardWebSocketSession[id=7fe50ef7-6df5-0489-6c31-3889992a68fa, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:32 [tomcat-handler-172] ERROR : Closing session due to exception for StandardWebSocketSession[id=7fe50ef7-6df5-0489-6c31-3889992a68fa, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:44 [tomcat-handler-178] INFO  : New session connected: a7cba8c3-c3a6-fc5e-997e-3438e387a2db, user: Kamil
2024-10-11 18:33:44 [tomcat-handler-191] INFO  : New message - user: Kamil /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:44 [tomcat-handler-189] ERROR : Kamil: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:102)
	at .reInitializeWithUser(ShoppingServiceRepository.java:107)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:120)
	at .lambda$synchronizeData$3(CustomViewModel.java:106)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1162)
	at .run(ThreadPoolExecutor.java:636)
	at .run(Thread.java:764)
2024-10-11 18:33:44 [tomcat-handler-190] INFO  : New session connected: 171d2e09-4ab2-784f-7397-5e2bf25e4ee9, user: Kamil
2024-10-11 18:33:44 [tomcat-handler-192] INFO  : New message - user: Kamil /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:44 [tomcat-handler-193] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:44 [tomcat-handler-194] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:44 [tomcat-handler-195] INFO  : New message - user: Kamil /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"a7cba8c3-c3a6-fc5e-997e-3438e387a2db"}}
2024-10-11 18:33:44 [tomcat-handler-196] ERROR : Closing session due to exception for StandardWebSocketSession[id=a7cba8c3-c3a6-fc5e-997e-3438e387a2db, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:44 [tomcat-handler-196] ERROR : Closing session due to exception for StandardWebSocketSession[id=a7cba8c3-c3a6-fc5e-997e-3438e387a2db, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:44 [tomcat-handler-197] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:44 [tomcat-handler-198] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:44 [tomcat-handler-199] INFO  : New message - user: Kamil /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"171d2e09-4ab2-784f-7397-5e2bf25e4ee9"}}
2024-10-11 18:33:44 [tomcat-handler-200] ERROR : Closing session due to exception for StandardWebSocketSession[id=171d2e09-4ab2-784f-7397-5e2bf25e4ee9, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:44 [tomcat-handler-200] ERROR : Closing session due to exception for StandardWebSocketSession[id=171d2e09-4ab2-784f-7397-5e2bf25e4ee9, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:48 [tomcat-handler-207] INFO  : New session connected: ff693b29-3bab-e1a5-45fb-768fb7d6a1a7, user: Jerzynki
2024-10-11 18:33:48 [tomcat-handler-218] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:48 [tomcat-handler-212] ERROR : Jerzynki: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:102)
	at .reInitializeWithUser(ShoppingServiceRepository.java:107)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:120)
	at .lambda$synchronizeData$3(CustomViewModel.java:106)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1162)
	at .run(ThreadPoolExecutor.java:636)
	at .run(Thread.java:764)
2024-10-11 18:33:48 [tomcat-handler-217] INFO  : New session connected: 745db17a-ed8f-a024-e125-321a3e1fc675, user: Jerzynki
2024-10-11 18:33:48 [tomcat-handler-219] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:48 [tomcat-handler-220] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:48 [tomcat-handler-221] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:33:44.512118300\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"ff693b29-3bab-e1a5-45fb-768fb7d6a1a7"}}
2024-10-11 18:33:48 [tomcat-handler-222] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:48 [tomcat-handler-223] ERROR : Closing session due to exception for StandardWebSocketSession[id=ff693b29-3bab-e1a5-45fb-768fb7d6a1a7, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:48 [tomcat-handler-223] ERROR : Closing session due to exception for StandardWebSocketSession[id=ff693b29-3bab-e1a5-45fb-768fb7d6a1a7, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:49 [tomcat-handler-224] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:49 [tomcat-handler-225] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:49 [tomcat-handler-226] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:33:44.512118300\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"745db17a-ed8f-a024-e125-321a3e1fc675"}}
2024-10-11 18:33:49 [tomcat-handler-227] ERROR : Closing session due to exception for StandardWebSocketSession[id=745db17a-ed8f-a024-e125-321a3e1fc675, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:49 [tomcat-handler-227] ERROR : Closing session due to exception for StandardWebSocketSession[id=745db17a-ed8f-a024-e125-321a3e1fc675, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:51 [tomcat-handler-234] INFO  : New session connected: 847e18d4-56f7-7fe7-d688-2d2aca44fa14, user: Kamil
2024-10-11 18:33:51 [tomcat-handler-245] INFO  : New message - user: Kamil /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:51 [tomcat-handler-239] ERROR : Kamil: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:102)
	at .reInitializeWithUser(ShoppingServiceRepository.java:107)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:120)
	at .lambda$synchronizeData$3(CustomViewModel.java:106)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1162)
	at .run(ThreadPoolExecutor.java:636)
	at .run(Thread.java:764)
2024-10-11 18:33:51 [tomcat-handler-246] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:51 [tomcat-handler-247] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:51 [tomcat-handler-244] INFO  : New session connected: 896e573c-d112-b4aa-e263-9ecf3d916d94, user: Kamil
2024-10-11 18:33:51 [tomcat-handler-248] INFO  : New message - user: Kamil /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"savedTime\":\"2024-10-11T18:33:48.892234500\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"847e18d4-56f7-7fe7-d688-2d2aca44fa14"}}
2024-10-11 18:33:51 [tomcat-handler-249] INFO  : New message - user: Kamil /n {"command":"CONNECT","headers":{}}
2024-10-11 18:33:51 [tomcat-handler-250] ERROR : Closing session due to exception for StandardWebSocketSession[id=847e18d4-56f7-7fe7-d688-2d2aca44fa14, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:51 [tomcat-handler-250] ERROR : Closing session due to exception for StandardWebSocketSession[id=847e18d4-56f7-7fe7-d688-2d2aca44fa14, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:33:51 [tomcat-handler-251] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:33:51 [tomcat-handler-252] INFO  : New message - user: Kamil /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:33:51 [tomcat-handler-253] INFO  : New message - user: Kamil /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[],\"categoryDtoList\":[],\"savedTime\":\"2024-10-11T18:33:48.892234500\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"896e573c-d112-b4aa-e263-9ecf3d916d94"}}
2024-10-11 18:33:51 [tomcat-handler-254] ERROR : Closing session due to exception for StandardWebSocketSession[id=896e573c-d112-b4aa-e263-9ecf3d916d94, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:33:51 [tomcat-handler-254] ERROR : Closing session due to exception for StandardWebSocketSession[id=896e573c-d112-b4aa-e263-9ecf3d916d94, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:34:06 [tomcat-handler-267] INFO  : New session connected: c2385e0a-2188-bae4-a530-3162bd1f143e, user: Jerzynki
2024-10-11 18:34:06 [tomcat-handler-265] INFO  : New session connected: 1f877e0b-b567-cfe4-9795-c78c9486becf, user: Jerzynki
2024-10-11 18:34:06 [tomcat-handler-274] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:34:06 [tomcat-handler-275] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:34:06 [tomcat-handler-276] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:34:06 [tomcat-handler-277] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:34:06 [tomcat-handler-278] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:33:51.117123500\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"c2385e0a-2188-bae4-a530-3162bd1f143e"}}
2024-10-11 18:34:06 [tomcat-handler-273] ERROR : Jerzynki: 
pl.kamjer.shoppinglistservice.exception.LogException: null
	at .assertMainThread(LiveData.java:502)
	at .observeForever(LiveData.java:224)
	at .connect(WebSocket.java:102)
	at .reInitializeWithUser(ShoppingServiceRepository.java:107)
	at .lambda$logUserInAndInitialize$4(LoginDialogOptionalLogin.java:81)
	at .$r8$lambda$RiBvSc8eReAFmbn2_2Ff7q-ifGg(:0)
	at .action(D8$$SyntheticClass:0)
	at .websocketSynchronize(ShoppingServiceRepository.java:120)
	at .lambda$synchronizeData$3(CustomViewModel.java:106)
	at .$r8$lambda$SZ_UDmMSbsT8GocIT7HcHFrUwwA(:0)
	at .action(D8$$SyntheticClass:0)
	at .lambda$getAllDataAndAct$14(ShoppingRepository.java:234)
	at .$r8$lambda$1UrOsx6w7OeNQCa2dHeSzWE0EQQ(:0)
	at .run(D8$$SyntheticClass:0)
	at .runWorker(ThreadPoolExecutor.java:1162)
	at .run(ThreadPoolExecutor.java:636)
	at .run(Thread.java:764)
2024-10-11 18:34:06 [tomcat-handler-279] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:34:06 [tomcat-handler-280] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:34:06 [tomcat-handler-281] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-11T18:33:51.117123500\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData","ID":"1f877e0b-b567-cfe4-9795-c78c9486becf"}}
2024-10-11 18:34:06 [tomcat-handler-282] ERROR : Closing session due to exception for StandardWebSocketSession[id=c2385e0a-2188-bae4-a530-3162bd1f143e, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:34:06 [tomcat-handler-282] ERROR : Closing session due to exception for StandardWebSocketSession[id=c2385e0a-2188-bae4-a530-3162bd1f143e, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:34:06 [tomcat-handler-281] ERROR : Closing session due to exception for StandardWebSocketSession[id=1f877e0b-b567-cfe4-9795-c78c9486becf, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1215)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
2024-10-11 18:34:06 [tomcat-handler-281] ERROR : Closing session due to exception for StandardWebSocketSession[id=1f877e0b-b567-cfe4-9795-c78c9486becf, uri=wss://192.168.0.13/ws]
java.io.IOException: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:71)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:55)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.onError(WsHttpUpgradeHandler.java:234)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:156)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:309)
Caused by: java.io.IOException: Unable to wrap data, invalid status [CLOSED]
	at org.apache.tomcat.util.net.SecureNioChannel.write(SecureNioChannel.java:877)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1632)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:1051)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1440)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1366)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1337)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:171)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 20 common frames omitted
2024-10-11 18:37:16 [tomcat-handler-293] INFO  : New session connected: 5bd0516b-2dc3-c42f-3c14-2ec058bbe73c, user: Jerzynki
2024-10-11 18:37:16 [tomcat-handler-294] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:37:19 [tomcat-handler-295] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:37:20 [tomcat-handler-296] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:37:20 [tomcat-handler-297] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"5bd0516b-2dc3-c42f-3c14-2ec058bbe73c","DEST":"/synchronizeData","BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"},{\"categoryId\":0,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":3,\"modifyState\":\"INSERT\"},{\"categoryId\":0,\"categoryName\":\"test1\",\"deleted\":false,\"localId\":4,\"modifyState\":\"INSERT\"}],\"savedTime\":\"2024-10-11T18:29:32.214574100\",\"shoppingItemDtoList\":[]}"}}
2024-10-11 18:41:18 [tomcat-handler-304] INFO  : New session connected: 50d38bbc-1ca8-dee5-95e6-c1594b953ae7, user: Jerzynki
2024-10-11 18:41:18 [tomcat-handler-305] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:41:21 [tomcat-handler-306] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:41:22 [tomcat-handler-307] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:41:22 [tomcat-handler-308] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"},{\"categoryId\":0,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":3,\"modifyState\":\"INSERT\"},{\"categoryId\":0,\"categoryName\":\"test1\",\"deleted\":false,\"localId\":4,\"modifyState\":\"INSERT\"}],\"savedTime\":\"2024-10-11T18:29:32.214574100\",\"shoppingItemDtoList\":[]}","ID":"50d38bbc-1ca8-dee5-95e6-c1594b953ae7","DEST":"/synchronizeData"}}
2024-10-11 18:41:52 [tomcat-handler-315] INFO  : New session connected: 86f328e9-0f83-2d5e-d9bf-92bd049202d0, user: Jerzynki
2024-10-11 18:41:52 [tomcat-handler-316] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-11 18:41:52 [tomcat-handler-317] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/synchronizeData"}}
2024-10-11 18:41:52 [tomcat-handler-318] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"DEST":"/pip"}}
2024-10-11 18:41:52 [tomcat-handler-319] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"ID":"86f328e9-0f83-2d5e-d9bf-92bd049202d0","BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\",\"typeName\":\"kg\"}],\"categoryDtoList\":[{\"categoryId\":52,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":1,\"modifyState\":\"NONE\"},{\"categoryId\":102,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":2,\"modifyState\":\"NONE\"},{\"categoryId\":0,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":3,\"modifyState\":\"INSERT\"},{\"categoryId\":0,\"categoryName\":\"test1\",\"deleted\":false,\"localId\":4,\"modifyState\":\"INSERT\"}],\"savedTime\":\"2024-10-11T18:29:32.214574100\",\"shoppingItemDtoList\":[]}","DEST":"/synchronizeData"}}
2024-10-11 21:37:05 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-11 21:37:05 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-11 21:37:05 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-11 23:07:23 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-11 23:07:23 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 4696 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-11 23:07:23 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-11 23:07:24 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-11 23:07:24 [main] INFO  : Finished Spring Data repository scanning in 150 ms. Found 4 JPA repository interfaces.
2024-10-11 23:07:25 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-11 23:07:25 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-11 23:07:25 [main] INFO  : Starting service [Tomcat]
2024-10-11 23:07:25 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-11 23:07:25 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-11 23:07:25 [main] INFO  : Root WebApplicationContext: initialization completed in 1950 ms
2024-10-11 23:07:25 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-11 23:07:25 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-11 23:07:25 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-11 23:07:25 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-11 23:07:25 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-11 23:07:25 [main] INFO  : HikariPool-1 - Starting...
2024-10-11 23:07:26 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f81507a
2024-10-11 23:07:26 [main] INFO  : HikariPool-1 - Start completed.
2024-10-11 23:07:26 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-11 23:07:27 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-11 23:07:27 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-11 23:07:27 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-11 23:07:27 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-11 23:07:28 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-11 23:07:28 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-11 23:07:28 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-11 23:07:28 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-11 23:07:28 [main] INFO  : Started ShoppingListServiceApplication in 6.11 seconds (process running for 10.018)
