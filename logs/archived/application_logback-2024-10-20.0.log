2024-10-20 13:30:01 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-20 13:30:01 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 7148 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-20 13:30:01 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-20 13:30:02 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-20 13:30:02 [main] INFO  : Finished Spring Data repository scanning in 131 ms. Found 4 JPA repository interfaces.
2024-10-20 13:30:02 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-20 13:30:02 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-20 13:30:02 [main] INFO  : Starting service [Tomcat]
2024-10-20 13:30:02 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-20 13:30:02 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-20 13:30:02 [main] INFO  : Root WebApplicationContext: initialization completed in 1594 ms
2024-10-20 13:30:03 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-20 13:30:03 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-20 13:30:03 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-20 13:30:03 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-20 13:30:03 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-20 13:30:03 [main] INFO  : HikariPool-1 - Starting...
2024-10-20 13:30:03 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c43cb12
2024-10-20 13:30:03 [main] INFO  : HikariPool-1 - Start completed.
2024-10-20 13:30:03 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-20 13:30:04 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-20 13:30:04 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-20 13:30:05 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-20 13:30:05 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-20 13:30:05 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-20 13:30:05 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-20 13:30:06 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-20 13:30:06 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-20 13:30:06 [main] INFO  : Started ShoppingListServiceApplication in 5.136 seconds (process running for 8.213)
2024-10-20 13:31:39 [tomcat-handler-4] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-20 13:31:39 [tomcat-handler-4] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-20 13:31:39 [tomcat-handler-4] INFO  : Completed initialization in 1 ms
2024-10-20 13:31:39 [tomcat-handler-4] INFO  : New session connected: e17380ba-311e-d0bf-aa49-d297360f4432, user: Jerzynki
2024-10-20 13:31:39 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-20 13:31:39 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"PARA":"Jerzynki;","DEST":"/{username}/pip"}}
2024-10-20 13:31:39 [tomcat-handler-7] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"PARA":"","DEST":"/synchronizeData"}}
2024-10-20 13:31:39 [tomcat-handler-9] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-14T19:34:32.420473900\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"INSERT\",\"shoppingItemId\":0},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"INSERT\",\"shoppingItemId\":0}]}","PARA":"Jerzynki;","ID":"e17380ba-311e-d0bf-aa49-d297360f4432","DEST":"/synchronizeData"}}
2024-10-20 13:31:42 [tomcat-handler-12] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:31:40.015667100\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"NONE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"NONE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"UPDATE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"NONE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"e17380ba-311e-d0bf-aa49-d297360f4432","DEST":"/synchronizeData"}}
2024-10-20 13:31:43 [tomcat-handler-13] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:31:42.414746\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"NONE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"UPDATE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"NONE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"NONE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"e17380ba-311e-d0bf-aa49-d297360f4432","DEST":"/synchronizeData"}}
2024-10-20 13:31:47 [tomcat-handler-15] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:31:43.424397700\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"NONE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"NONE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"NONE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"UPDATE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"e17380ba-311e-d0bf-aa49-d297360f4432","DEST":"/synchronizeData"}}
2024-10-20 13:34:00 [tomcat-handler-17] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:31:47.071320500\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"UPDATE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"NONE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"NONE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"NONE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"NONE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"e17380ba-311e-d0bf-aa49-d297360f4432","DEST":"/synchronizeData"}}
2024-10-20 13:34:09 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-20 13:34:09 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-20 13:34:09 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-20 13:34:09 [SpringApplicationShutdownHook] ERROR : Closing session due to exception for StandardWebSocketSession[id=e17380ba-311e-d0bf-aa49-d297360f4432, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:455)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:117)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:56)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:556)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:544)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1024)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:46)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4041)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:4650)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:471)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:919)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:447)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:301)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.destroy(TomcatWebServer.java:374)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:177)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1093)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-10-20 13:34:09 [SpringApplicationShutdownHook] INFO  : Session closing: e17380ba-311e-d0bf-aa49-d297360f4432 - reason: The web application is stopping
2024-10-20 13:34:15 [background-preinit] INFO  : HV000001: Hibernate Validator 8.0.1.Final
2024-10-20 13:34:15 [main] INFO  : Starting ShoppingListServiceApplication using Java 21.0.2 with PID 7428 (C:\Users\kjerz\Desktop\projekty\ShoppingListService\target\classes started by kjerz in C:\Users\kjerz\Desktop\projekty\ShoppingListService)
2024-10-20 13:34:15 [main] INFO  : No active profile set, falling back to 1 default profile: "default"
2024-10-20 13:34:16 [main] INFO  : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-20 13:34:16 [main] INFO  : Finished Spring Data repository scanning in 84 ms. Found 4 JPA repository interfaces.
2024-10-20 13:34:16 [main] INFO  : Tomcat initialized with port 443 (https)
2024-10-20 13:34:16 [main] INFO  : Initializing ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-20 13:34:16 [main] INFO  : Starting service [Tomcat]
2024-10-20 13:34:16 [main] INFO  : Starting Servlet engine: [Apache Tomcat/10.1.25]
2024-10-20 13:34:16 [main] INFO  : Initializing Spring embedded WebApplicationContext
2024-10-20 13:34:16 [main] INFO  : Root WebApplicationContext: initialization completed in 1199 ms
2024-10-20 13:34:17 [main] INFO  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-20 13:34:17 [main] INFO  : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-10-20 13:34:17 [main] INFO  : HHH000026: Second-level cache disabled
2024-10-20 13:34:17 [main] INFO  : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-10-20 13:34:17 [main] WARN  : HikariPool-1 - idleTimeout has been set but has no effect because the pool is operating as a fixed size pool.
2024-10-20 13:34:17 [main] INFO  : HikariPool-1 - Starting...
2024-10-20 13:34:17 [main] INFO  : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@69fe8c75
2024-10-20 13:34:17 [main] INFO  : HikariPool-1 - Start completed.
2024-10-20 13:34:17 [main] WARN  : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-10-20 13:34:18 [main] INFO  : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-10-20 13:34:18 [main] INFO  : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-20 13:34:18 [main] WARN  : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-20 13:34:18 [main] INFO  : Global AuthenticationManager configured with UserDetailsService bean with name userDetailService
2024-10-20 13:34:18 [main] INFO  : Exposing 1 endpoint beneath base path '/actuator'
2024-10-20 13:34:19 [main] INFO  : Starting ProtocolHandler ["https-jsse-nio-0.0.0.0-443"]
2024-10-20 13:34:19 [main] INFO  : Connector [https-jsse-nio-0.0.0.0-443], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\kjerz\.keystore] using alias [shoppingListKey] with trust store [null]
2024-10-20 13:34:19 [main] INFO  : Tomcat started on port 443 (https) with context path '/'
2024-10-20 13:34:19 [main] INFO  : Started ShoppingListServiceApplication in 4.01 seconds (process running for 4.535)
2024-10-20 13:34:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-10-20 13:34:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Initializing Servlet 'dispatcherServlet'
2024-10-20 13:34:19 [RMI TCP Connection(1)-192.168.0.13] INFO  : Completed initialization in 0 ms
2024-10-20 13:34:24 [tomcat-handler-4] INFO  : New session connected: 1514bf5f-f5de-f423-c6b7-0fe4120c3c97, user: Jerzynki
2024-10-20 13:34:24 [tomcat-handler-4] INFO  : New message - user: Jerzynki /n {"command":"CONNECT","headers":{}}
2024-10-20 13:34:24 [tomcat-handler-5] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"PARA":"Jerzynki;","DEST":"/{username}/pip"}}
2024-10-20 13:34:24 [tomcat-handler-6] INFO  : New message - user: Jerzynki /n {"command":"SUBSCRIBE","headers":{"PARA":"","DEST":"/synchronizeData"}}
2024-10-20 13:34:24 [tomcat-handler-9] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:34:00.797809900\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"NONE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"NONE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"NONE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"NONE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"1514bf5f-f5de-f423-c6b7-0fe4120c3c97","DEST":"/synchronizeData"}}
2024-10-20 13:34:24 [tomcat-handler-9] INFO  : /synchronizeData connected: User UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=Jerzynki, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.13, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-10-20 13:34:26 [tomcat-handler-11] INFO  : New message - user: Jerzynki /n {"command":"MESSAGE","headers":{"BODY":"{\"amountTypeDtoList\":[{\"amountTypeId\":1,\"deleted\":false,\"localId\":7,\"modifyState\":\"NONE\",\"typeName\":\"kg\"},{\"amountTypeId\":2,\"deleted\":false,\"localId\":8,\"modifyState\":\"NONE\",\"typeName\":\"szt\"},{\"amountTypeId\":52,\"deleted\":false,\"localId\":9,\"modifyState\":\"NONE\",\"typeName\":\"op\"}],\"categoryDtoList\":[{\"categoryId\":302,\"categoryName\":\"warzywa\",\"deleted\":false,\"localId\":38,\"modifyState\":\"NONE\"},{\"categoryId\":352,\"categoryName\":\"owoce\",\"deleted\":false,\"localId\":39,\"modifyState\":\"NONE\"},{\"categoryId\":402,\"categoryName\":\"est1\",\"deleted\":false,\"localId\":40,\"modifyState\":\"NONE\"}],\"savedTime\":\"2024-10-20T13:34:24.847489\",\"shoppingItemDtoList\":[{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":352,\"itemName\":\"asd\",\"localAmountTypeId\":7,\"localCategoryId\":39,\"localId\":24,\"modifyState\":\"NONE\",\"shoppingItemId\":203},{\"amount\":12.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":302,\"itemName\":\"testr\",\"localAmountTypeId\":7,\"localCategoryId\":38,\"localId\":25,\"modifyState\":\"NONE\",\"shoppingItemId\":204},{\"amount\":1.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"test\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":26,\"modifyState\":\"NONE\",\"shoppingItemId\":252},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"1\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":27,\"modifyState\":\"NONE\",\"shoppingItemId\":302},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"2\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":28,\"modifyState\":\"NONE\",\"shoppingItemId\":303},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"3\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":29,\"modifyState\":\"UPDATE\",\"shoppingItemId\":304},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"4\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":30,\"modifyState\":\"NONE\",\"shoppingItemId\":305},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"5\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":31,\"modifyState\":\"NONE\",\"shoppingItemId\":306},{\"amount\":0.0,\"bought\":true,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"6\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":32,\"modifyState\":\"NONE\",\"shoppingItemId\":307},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"7\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":33,\"modifyState\":\"NONE\",\"shoppingItemId\":308},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"8\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":34,\"modifyState\":\"NONE\",\"shoppingItemId\":309},{\"amount\":0.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"9\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":35,\"modifyState\":\"NONE\",\"shoppingItemId\":310},{\"amount\":1.0,\"bought\":false,\"deleted\":false,\"itemAmountTypeId\":1,\"itemCategoryId\":402,\"itemName\":\"10\",\"localAmountTypeId\":7,\"localCategoryId\":40,\"localId\":36,\"modifyState\":\"NONE\",\"shoppingItemId\":311}]}","PARA":"Jerzynki;","ID":"1514bf5f-f5de-f423-c6b7-0fe4120c3c97","DEST":"/synchronizeData"}}
2024-10-20 13:34:26 [tomcat-handler-11] INFO  : /synchronizeData connected: User UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=Jerzynki, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.13, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-10-20 13:45:58 [SpringApplicationShutdownHook] INFO  : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-20 13:45:58 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown initiated...
2024-10-20 13:45:58 [SpringApplicationShutdownHook] INFO  : HikariPool-1 - Shutdown completed.
2024-10-20 13:45:58 [SpringApplicationShutdownHook] ERROR : Closing session due to exception for StandardWebSocketSession[id=1514bf5f-f5de-f423-c6b7-0fe4120c3c97, uri=wss://192.168.0.13/ws]
java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:455)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at pl.kamjer.shoppinglistservice.config.websocket.ConnectionBroker.handleException(ConnectionBroker.java:117)
	at pl.kamjer.shoppinglistservice.config.websocket.WebSocketHandler.handleTransportError(WebSocketHandler.java:56)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleTransportError(WebSocketHandlerDecorator.java:80)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleTransportError(LoggingWebSocketHandlerDecorator.java:64)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleTransportError(ExceptionWebSocketHandlerDecorator.java:68)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.onError(StandardWebSocketHandlerAdapter.java:156)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:804)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:589)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:556)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:544)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:1024)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:46)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4041)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:4650)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1219)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1208)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:317)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:814)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:471)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:919)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:231)
	at org.apache.catalina.startup.Tomcat.stop(Tomcat.java:447)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.stopTomcat(TomcatWebServer.java:301)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.destroy(TomcatWebServer.java:374)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:177)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1093)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-10-20 13:45:58 [SpringApplicationShutdownHook] INFO  : Session closing: 1514bf5f-f5de-f423-c6b7-0fe4120c3c97 - reason: The web application is stopping
